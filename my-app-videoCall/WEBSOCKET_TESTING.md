# Тестування WebSocket Video Calls

## Запуск системи

### 1. Запуск WebSocket сервера
```bash
cd server
npm install
npm run dev
```
Сервер запуститься на `http://localhost:3001`

### 2. Запуск React додатка
```bash
# В новому терміналі
cd my-app-videoCall
npm run dev
```
Додаток запуститься на `http://localhost:5173`

## Тестування дзвінків

### Варіант 1: Різні браузери
1. Відкрийте Chrome: `http://localhost:5173`
2. Відкрийте Firefox: `http://localhost:5173`
3. Увійдіть як різні користувачі
4. Зробіть дзвінок з одного браузера на інший

### Варіант 2: Різні вкладки (один браузер)
1. Вкладка 1: Увійдіть як Alice
2. Вкладка 2: Увійдіть як Bob
3. Вкладка 3: Увійдіть як Charlie
4. Тестуйте дзвінки між вкладками

### Варіант 3: Різні пристрої
1. Комп'ютер: Alice
2. Телефон: Bob (через Wi-Fi)
3. Планшет: Charlie

## Функціонал для тестування

### ✅ Основні функції
- [ ] Реєстрація користувачів при вході
- [ ] Відображення онлайн користувачів
- [ ] Ініціація аудіо дзвінка
- [ ] Ініціація відео дзвінка
- [ ] Прийняття дзвінка
- [ ] Відхилення дзвінка
- [ ] Скасування дзвінка
- [ ] Завершення дзвінка

### ✅ WebSocket події
- [ ] Підключення до серверу
- [ ] Отримання списку онлайн користувачів
- [ ] Повідомлення про вхідний дзвінок
- [ ] Синхронізація стану дзвінків
- [ ] Відключення користувача

### ✅ VideoSDK інтеграція
- [ ] Створення мітингу
- [ ] Приєднання до мітингу
- [ ] Керування мікрофоном
- [ ] Керування камерою
- [ ] Вихід з мітингу

## Моніторинг

### Сервер
- Health check: `http://localhost:3001/health`
- Активні дзвінки: `http://localhost:3001/calls`

### Консоль браузера
- WebSocket події
- Помилки підключення
- VideoSDK логи

## Можливі проблеми

### WebSocket не підключається
```bash
# Перевірте чи запущений сервер
curl http://localhost:3001/health
```

### VideoSDK помилки
- Перевірте VITE_VIDEOSDK_TOKEN в .env
- Переконайтеся що токен валідний

### Дзвінки не доходять
- Перевірте консоль серверу
- Переконайтеся що користувачі онлайн
- Перевірте WebSocket з'єднання в браузері

## Архітектура

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   React Client  │────│  WebSocket       │────│   React Client  │
│   (Alice)       │    │  Server          │    │   (Bob)         │
│                 │    │  (port 3001)     │    │                 │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                        │                        │
         └────────────────────────┼────────────────────────┘
                                  │
                         ┌────────▼────────┐
                         │   VideoSDK       │
                         │   (Meeting)      │
                         └─────────────────┘
```

## Логи для дебагінга

### Сервер консоль
```
🚀 WebSocket server running on port 3001
User connected: abc123
User registered: { name: "Alice", key: "alice" }
Call initiated: { from: "alice", to: "bob", meetingId: "xyz789" }
```

### Браузер консоль
```
🔌 Connected to WebSocket server: abc123
📞 Incoming call: { from: { name: "Alice" }, meetingId: "xyz789" }
✅ Call accepted: { meetingId: "xyz789" }
``` 